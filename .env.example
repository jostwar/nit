## Backend
DATABASE_URL=postgresql://nitiq:nitiq@localhost:5432/nitiq?schema=public
JWT_SECRET=change-me
JWT_REFRESH_SECRET=change-me
JWT_ACCESS_TTL=1h
JWT_REFRESH_TTL=7d
PORT=4000
# Origen(es) permitidos para CORS (varios separados por coma). Si no se define, se acepta el origen de la petición.
CORS_ORIGIN=http://localhost:3000
TENANT_NAME=NITIQ Demo

# Source API (opcional)
SOURCE_API_URL=
SOURCE_API_TOKEN=
SOURCE_API_PROVIDER=
SOURCE_API_DB=
SOURCE_API_VENDOR=
SOURCE_API_CXC_BASE_URL=https://cartera.fomplus.com
SOURCE_API_VENTAS_BASE_URL=https://gspapiest.fomplus.com
SOURCE_SYNC_ENABLED=true
# Cupo del cliente: si la API de cartera (EstadoDeCuentaCartera) devuelve cupo/cupocredito/credito, se guarda en Cartera. Campos probados: cupo,cupocredito,credito,creditlimit,cupo_credito,limite.

# Inventario (marcas): GenerarInformacionInventariosGet; cruce referencia venta → marca
SOURCE_API_INVENTARIO_BASE_URL=https://gspapi.fomplus.com
SOURCE_API_INVENTARIO_TOKEN=
# Si no se define SOURCE_API_INVENTARIO_TOKEN, se usa SOURCE_API_TOKEN. SOURCE_API_DB también aplica.
# Campo de marca en inventario (por defecto MARCA)
# SOURCE_INVENTARIO_BRAND_FIELDS=MARCA,marca
# Campo de clase en inventario (código; el nombre se carga con PUT /source/class-mapping)
# SOURCE_INVENTARIO_CLASS_FIELDS=CLASE,clase,codclase
# Días por chunk al pedir ventas al ERP (7 por defecto). Con 31 hay menos llamadas en carga histórica.
# SOURCE_VENTAS_CHUNK_DAYS=31
# Campos de ciudad/sector en GenerarInfoVentas (por defecto incluye NOMSEC, nomciu, ciudad, etc.)
# SOURCE_VENTAS_CITY_FIELDS=NOMSEC,nomciu,ciudad,cli_nomciu
# TIPOMOV (GenerarInfoVentas): define SUMA vs RESTA para ventas netas.
# Tabla de referencia:
#   TIPOMOV | Código | Concepto                         | Definición
#   --------|--------|----------------------------------|----------
#   TIPOMOV | 01     | Factura de venta                  | SUMA
#   TIPOMOV | 13     | Factura de caja                   | SUMA
#   TIPOMOV | 04     | Nota crédito a factura            | RESTA
#   TIPOMOV | 06     | Nota crédito independiente        | RESTA
#   TIPOMOV | 15     | Devolución independiente caja    | RESTA
# Campo(s) en la API para leer el código (por defecto tipomov,tipmov,tipo_mov,tipodoc,codmov).
# SOURCE_VENTAS_TIPOMOV_FIELDS=TIPOMOV,tipomov,tipodoc
# Códigos que RESTAN venta. Por defecto 04,06,15. Ventas netas = facturas SUMA − facturas RESTA.
# SOURCE_VENTAS_TIPOMOV_RESTA=04,06,15
# Marca y clase en ítems de venta (filtros y venta por marca/clase por cliente):
# - Si GenerarInfoVentas devuelve MARCA/CLASE en cada línea, se usan estos campos (configurables abajo).
# - Si no, se cruza por referencia de producto con inventario (GenerarInformacionInventariosGet); la ref se normaliza (trim + mayúsculas).
# Para que aparezcan nombres de marca: 1) Cargar load-mappings (brand-mapping.json y class-mapping.json), 2) Tener inventario configurado o CSV ref→marca (abajo), o que la API de ventas devuelva marca/clase, 3) Ejecutar sincronización.
# CSV referencia→marca: scripts/ref-brand-mapping.csv (cabecera opcional: referencia,marca). Las referencias se normalizan (mayúsculas). Tiene prioridad sobre inventario.
# SOURCE_REF_BRAND_CSV_PATH=scripts/ref-brand-mapping.csv
# Campo(s) de marca en GenerarInfoVentas (por defecto MARCA,nommar,nommarca,marca,brand,codmar).
# SOURCE_VENTAS_BRAND_FIELDS=MARCA,marca,codmar
# Campo(s) de clase en GenerarInfoVentas (por defecto CLASE,clase,codclase,class,codcla).
# SOURCE_VENTAS_CLASS_FIELDS=CLASE,clase,codclase

## Frontend (en producción debe ser la URL pública de la API, ej. http://IP:4000/api)
NEXT_PUBLIC_API_URL=http://localhost:4000/api
